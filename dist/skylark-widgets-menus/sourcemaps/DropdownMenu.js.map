{"version":3,"sources":["DropdownMenu.js"],"names":["define","Vector2","geom","Widget","Panel","TextMixin","menus","ButtonMenu","DropdownMenu","inherit","_construct","parent","prototype","call","this","skin","getSkin","_elm","style","backgroundColor","Editor","theme","buttonColor","cursor","pointerEvents","_buildText","preventDragEvents","panel","overflow","display","zIndex","icon","arrow","document","createElement","position","right","top","width","height","src","arrowRightImageUrl","appendChild","direction","DOWN","expanded","itemsSize","items","self","onmouseenter","setExpanded","buttonOverColor","onmouseleave","setDirection","location","showArrow","setIcon","left","removeItem","index","length","destroy","splice","addItem","name","callback","button","setText","setAlignment","LEFT","set","setOnClick","undefined","push","addMenu","menu","setMargin","y","size","x","out","testAxis","bottom","UP","RIGHT","updateItems","i","updateInterface","updateSize","addOption","updateOptions"],"mappings":"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","file":"../DropdownMenu.js","sourcesContent":["define([\r\n\t\"skylark-langx-numerics/Vector2\",\r\n\t\"skylark-domx-geom\",\r\n\r\n\t\"skylark-widgets-base/Widget\",\r\n\t\"skylark-widgets-base/panels/Panel\",\r\n\t\"skylark-widgets-base/mixins/TextMixin\",\r\n\t\"./menus\",\r\n\t\"./ButtonMenu\"\r\n],function(\r\n\tVector2,\r\n\tgeom,\r\n\r\n\tWidget,\r\n\tPanel,\r\n\tTextMixin,\r\n\r\n\tmenus,\r\n\tButtonMenu\r\n){\r\n\t\"use strict\";\r\n\r\n\t/**\r\n\t * Dropdown menu element, used to create dropdowns in menu bars and in context menus.\r\n\t * \r\n\t * @class DropdownMenu\r\n\t * @extends {Text}\r\n\t * @param {Widget} parent Parent widget. \r\n\t */\r\n\r\n\r\n\tvar DropdownMenu = Widget.inherit({\r\n\t\t...TextMixin,\r\n\r\n\t\t_construct : function (parent) {\r\n\t\t\tWidget.prototype._construct.call(this, parent, \"div\");\r\n\r\n\t\t\tvar skin = this.getSkin();\r\n\r\n\t\t\tthis._elm.style.backgroundColor = Editor.theme.buttonColor;\r\n\t\t\tthis._elm.style.cursor = \"pointer\";\r\n\t\t\tthis._elm.style.pointerEvents = \"auto\";\r\n\r\n\t\t\tthis._buildText();\r\n\r\n\t\t\tthis.preventDragEvents();\r\n\r\n\t\t\t/**\r\n\t\t\t * Panel element, where the items are stored.\r\n\t\t\t *\r\n\t\t\t * This DOM element is added directly to the parent DOM element.\r\n\t\t\t *\r\n\t\t\t * @attribute panel\r\n\t\t\t * @type {DOM}\r\n\t\t\t */\r\n\t\t\tthis.panel = new Panel(parent, \"div\");\r\n\t\t\tthis.panel._elm.style.overflow = \"visible\";\r\n\t\t\tthis.panel._elm.style.display = \"none\";\r\n\t\t\tthis.panel._elm.style.zIndex = \"300\";\r\n\r\n\t\t\t/**\r\n\t\t\t * Item icon image, the element is only created when a icon is set.\r\n\t\t\t *\r\n\t\t\t * @attribute icon\r\n\t\t\t * @type {DOM}\r\n\t\t\t */\r\n\t\t\tthis.icon = null;\r\n\r\n\t\t\t/**\r\n\t\t\t * Decorative arrow.\r\n\t\t\t *\r\n\t\t\t * @attribute arrow\r\n\t\t\t * @type {DOM}\r\n\t\t\t */\r\n\t\t\tthis.arrow = document.createElement(\"img\");\r\n\t\t\tthis.arrow.style.display = \"none\";\r\n\t\t\tthis.arrow.style.position = \"absolute\";\r\n\t\t\tthis.arrow.style.right = \"5px\";\r\n\t\t\tthis.arrow.style.top = \"3px\";\r\n\t\t\tthis.arrow.style.width = \"12px\";\r\n\t\t\tthis.arrow.style.height = \"12px\";\r\n\t\t\t//this.arrow.src = Global.FILE_PATH + \"icons/misc/arrow_right.png\";\r\n\t\t\tthis.arrow.src = skin.arrowRightImageUrl;\r\n\t\t\tthis._elm.appendChild(this.arrow);\t\r\n\r\n\t\t\t/**\r\n\t\t\t * Direction to open the dropdown.\r\n\t\t\t *\r\n\t\t\t * @attribute direction\r\n\t\t\t * @type {Number}\r\n\t\t\t */\r\n\t\t\tthis.direction = DropdownMenu.DOWN;\r\n\t\t\t\r\n\t\t\t/**\r\n\t\t\t * Indicates if the dropdown menu is expanded.\r\n\t\t\t *\r\n\t\t\t * @attribute expanded\r\n\t\t\t * @type {Boolean}\r\n\t\t\t */\r\n\t\t\tthis.expanded = false;\r\n\t\t\tthis.itemsSize = new Vector2(150, 20);\r\n\r\n\t\t\t/**\r\n\t\t\t * Items available in the dropdown.\r\n\t\t\t *\r\n\t\t\t * Items are stored as: {button:button, value:object, name:string}\r\n\t\t\t *\r\n\t\t\t * @attribute items\r\n\t\t\t * @type {Array}\r\n\t\t\t */\r\n\t\t\tthis.items = [];\r\n\r\n\t\t\tvar self = this;\r\n\r\n\t\t\tthis._elm.onmouseenter = function()\r\n\t\t\t{\r\n\t\t\t\tself.setExpanded(true);\r\n\t\t\t\t//self._elm.style.backgroundColor = Editor.theme.buttonOverColor;\r\n\t\t\t\tself._elm.style.backgroundColor = skin.buttonOverColor;\r\n\t\t\t};\r\n\r\n\t\t\tthis._elm.onmouseleave = function()\r\n\t\t\t{\r\n\t\t\t\tself.setExpanded(false);\r\n\t\t\t\t//self._elm.style.backgroundColor = Editor.theme.buttonColor;\r\n\t\t\t\tself._elm.style.backgroundColor = skin.buttonColor;\r\n\t\t\t};\r\n\t\t\t\r\n\t\t\tthis.panel._elm.onmouseenter = function()\r\n\t\t\t{\r\n\t\t\t\tself.setExpanded(true);\r\n\t\t\t};\r\n\r\n\t\t\tthis.panel._elm.onmouseleave = function()\r\n\t\t\t{\r\n\t\t\t\tself.setExpanded(false);\r\n\t\t\t};\r\n\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Set location to where items should open.\r\n\t\t *\r\n\t\t * @method setDirection\r\n\t\t */\r\n\t\tsetDirection : function(location) {\r\n\t\t\tthis.direction = location;\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Show arrow.\r\n\t\t *\r\n\t\t * @method showArrow\r\n\t\t */\r\n\t\tshowArrow : function() {\r\n\t\t\tthis.arrow.style.display = \"block\";\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Set icon.\r\n\t\t *\r\n\t\t * @method setIcon\r\n\t\t * @param {String} icon Image URL.\r\n\t\t */\r\n\t\tsetIcon : function(icon) {\r\n\t\t\tif(this.icon === null) {\r\n\t\t\t\tthis.icon = document.createElement(\"img\");\r\n\t\t\t\tthis.icon.style.display = \"block\";\r\n\t\t\t\tthis.icon.style.position = \"absolute\";\r\n\t\t\t\tthis.icon.style.left = \"5px\";\r\n\t\t\t\tthis.icon.style.top = \"3px\";\r\n\t\t\t\tthis.icon.style.width = \"12px\";\r\n\t\t\t\tthis.icon.style.height = \"12px\";\r\n\t\t\t\tthis._elm.appendChild(this.icon);\r\n\t\t\t}\r\n\r\n\t\t\tthis.icon.src = icon;\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Remove item from menu.\r\n\t\t *\r\n\t\t * @method removeItem\r\n\t\t * @param {Number} index\r\n\t\t */\r\n\t\tremoveItem : function(index) {\r\n\t\t\tif(index >= 0 && index < this.items.length) {\r\n\t\t\t\tthis.items[index].destroy();\r\n\t\t\t\tthis.items.splice(index, 1);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Add new item to menu\r\n\t\t *\r\n\t\t * @method addItem\r\n\t\t * @param {String} name of the item\r\n\t\t * @param {Function} callback Callback function\r\n\t\t * @param {String} icon Icon URL.\r\n\t\t * @return {ButtonMenu} Button created for the new item.\r\n\t\t */\r\n\t\taddItem : function(name, callback, icon) {\r\n\t\t\tvar button = new ButtonMenu(this.panel);\r\n\t\t\tbutton._elm.style.zIndex = \"200\";\r\n\t\t\tbutton.setText(name);\r\n\t\t\tbutton.setAlignment(TextMixin.LEFT);\r\n\t\t\tbutton.position.set(25, 0);\r\n\r\n\t\t\tvar self = this;\r\n\t\t\tbutton.setOnClick(function(){\r\n\t\t\t\tcallback();\r\n\t\t\t\tself.setExpanded(false);\r\n\t\t\t});\r\n\r\n\t\t\tif(icon !== undefined) \t{\r\n\t\t\t\tbutton.setIcon(icon);\r\n\t\t\t}\r\n\r\n\t\t\tthis.items.push(button);\r\n\r\n\t\t\treturn button;\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Add new menu to menu.\r\n\t\t *\r\n\t\t * @method addItem\r\n\t\t * @param {String} name Name of the item.\r\n\t\t * @param {String} icon Optional icon, image URL.\r\n\t\t * @return {DropdownMenu} The new menu created.\r\n\t\t */\r\n\t\taddMenu : function(name, icon) {\r\n\t\t\tvar menu = new DropdownMenu(this.panel);\r\n\t\t\tmenu.setText(name);\r\n\t\t\tmenu.setDirection(DropdownMenu.LEFT);\r\n\t\t\tmenu.showArrow();\r\n\t\t\tmenu.setAlignment(TextMixin.LEFT);\r\n\t\t\tmenu.setMargin(25);\r\n\t\t\t\r\n\t\t\tif(icon !== undefined)\r\n\t\t\t{\r\n\t\t\t\tmenu.setIcon(icon);\r\n\t\t\t}\r\n\r\n\t\t\tthis.items.push(menu);\r\n\r\n\t\t\treturn menu;\r\n\t\t},\r\n\r\n\t\t/** \r\n\t\t * Update expanded state, position all items in this dropdown.\r\n\t\t * \r\n\t\t * @method setExpanded\r\n\t\t * @param {Boolean} expanded If true the menu will be expanded.\r\n\t\t */\r\n\t\tsetExpanded : function(expanded){\r\n\t\t\tthis.expanded = expanded;\r\n\r\n\t\t\tif(this.expanded) {\r\n\t\t\t\tthis.panel._elm.style.display = \"block\";\r\n\r\n\t\t\t\tif(this.direction === DropdownMenu.DOWN){\r\n\t\t\t\t\tthis.panel._elm.style.top = (this.position.y + this.size.y) + \"px\";\r\n\t\t\t\t\tthis.panel._elm.style.left = this.position.x + \"px\";\r\n\r\n\t\t\t\t\t//var out = DOMUtils.checkBorder(this.panel);\r\n\t\t\t\t\tvar out = geom.testAxis(this.panel);\r\n\r\n\t\t\t\t\tif(out.y !== 0)\t{\r\n\t\t\t\t\t\tthis.panel._elm.style.top = null;\r\n\t\t\t\t\t\tthis.panel._elm.style.bottom = (this.position.y + this.size.y) + \"px\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(out.x !== 0)\t{\r\n\t\t\t\t\t\tthis.panel._elm.style.left = (this.position.x - out.x) + \"px\"; \r\n\t\t\t\t\t}\r\n\t\t\t\t} else if(this.direction === DropdownMenu.UP){\r\n\t\t\t\t\tthis.panel._elm.style.bottom = (this.position.y + this.size.y) + \"px\";\r\n\t\t\t\t\tthis.panel._elm.style.left = this.position.x + \"px\";\r\n\r\n\t\t\t\t\t//var out = DOMUtils.checkBorder(this.panel);\r\n\t\t\t\t\tvar out = geom.testAxis(this.panel);\r\n\t\t\t\t\tif(out.y !== 0)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.panel._elm.style.bottom = null;\r\n\t\t\t\t\t\tthis.panel._elm.style.top = (this.position.y + this.size.y) + \"px\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(out.x !== 0)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.panel._elm.style.left = (this.position.x - out.x) + \"px\"; \r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse if(this.direction === DropdownMenu.LEFT)\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.panel._elm.style.top = this.position.y + \"px\";\r\n\t\t\t\t\tthis.panel._elm.style.left = (this.position.x + this.size.x) + \"px\";\r\n\r\n\t\t\t\t\t//var out = DOMUtils.checkBorder(this.panel);\r\n\t\t\t\t\tvar out = geom.testAxis(this.panel);\r\n\t\t\t\t\tif(out.x !== 0)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.panel._elm.style.left = (this.position.x - this.size.x) + \"px\"; \r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(out.y !== 0)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.panel._elm.style.top = (this.position.y - out.y) + \"px\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse if(this.direction === DropdownMenu.RIGHT)\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.panel._elm.style.top = this.position.y + \"px\";\r\n\t\t\t\t\tthis.panel._elm.style.left = (this.position.x - this.size.x) + \"px\";\r\n\r\n\t\t\t\t\t//var out = DOMUtils.checkBorder(this.panel);\r\n\t\t\t\t\tvar out = geom.testAxis(this.panel);\r\n\t\t\t\t\tif(out.x !== 0)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.panel._elm.style.left = (this.position.x + this.size.x) + \"px\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(out.y !== 0)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.panel._elm.style.top = (this.position.y - out.y) + \"px\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tthis.panel._elm.style.display = \"none\";\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Update all items in the menu.\r\n\t\t * \r\n\t\t * @method updateItems\r\n\t\t */\r\n\t\tupdateItems : function() {\r\n\t\t\tfor(var i = 0; i < this.items.length; i++) {\r\n\t\t\t\tthis.items[i].size.set(this.itemsSize.x, this.itemsSize.y);\r\n\t\t\t\tthis.items[i].position.set(0, this.itemsSize.y * i);\r\n\t\t\t\tthis.items[i].updateInterface();\r\n\t\t\t}\r\n\r\n\t\t\tthis.panel._elm.style.width = this.size.x + \"px\";\r\n\t\t\tthis.panel._elm.style.height = (this.itemsSize.y * this.items.length) + \"px\";\r\n\t\t},\r\n\r\n\t\tdestroy : function() {\r\n\t\t\tWidget.prototype.destroy.call(this);\r\n\r\n\t\t\tthis.parent.destroy();\r\n\t\t},\r\n\r\n\t\tupdateSize : function() {\r\n\t\t\tTextMixin.updateSize.call(this);\r\n\r\n\t\t\tthis.updateItems();\r\n\t\t}\r\n\r\n\r\n\t});\r\n\r\n\r\n\tDropdownMenu.DOWN = 0;\r\n\tDropdownMenu.UP = 1;\r\n\tDropdownMenu.LEFT = 2;\r\n\tDropdownMenu.RIGHT = 3;\r\n\r\n\r\n\tDropdownMenu.prototype.addOption = DropdownMenu.prototype.addItem;\r\n\tDropdownMenu.prototype.updateOptions = DropdownMenu.prototype.updateItems;\r\n\r\n\r\n\treturn menus.DropdownMenu = DropdownMenu;\r\n});"]}