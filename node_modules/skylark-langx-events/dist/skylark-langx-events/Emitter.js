/**
 * skylark-langx-events - The skylark JavaScript language extension library.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.0
 * @link www.skylarkjs.org
 * @license MIT
 */
define(["skylark-langx-types","skylark-langx-objects","skylark-langx-arrays","skylark-langx-klass","./events","./Event","./Listener"],function(t,n,i,a,e,r,s){var o=Array.prototype.slice,h=i.compact,u=t.isDefined,l=t.isPlainObject,f=t.isFunction,c=t.isString,p=(t.isEmptyObject,n.mixin);n.safeMixin;function d(t){var n=(""+t).split(".");return{name:n[0],ns:n.slice(1).join(" ")}}var v=s.inherit({on:function(t,n,i,a,e,r){var s=this,o=this._hub||(this._hub={});if(l(t))return e=a,each(t,function(t,a){s.on(t,n,i,a,e,r)}),this;if(c(n)||f(a)||(e=a,a=i,i=n,n=void 0),f(i)&&(e=a,a=i,i=null),!a)throw new Error("No callback function");if(!f(a))throw new Error("The callback  is not afunction");return c(t)&&(t=t.split(/\s/)),t.forEach(function(t){var s=d(t),h=s.name,u=s.ns;(o[h]||(o[h]=[])).push({fn:a,selector:n,data:i,ctx:e,ns:u,one:r})}),this},one:function(t,n,i,a,e){return this.on(t,n,i,a,e,1)},emit:function(t){if(!this._hub)return this;var n=this;c(t)&&(t=new r(t)),Object.defineProperty(t,"target",{value:this});var i=o.call(arguments,1);return i=u(i)?[t].concat(i):[t],[t.type||t.name,"all"].forEach(function(a){var e=d(a),r=e.name,s=e.ns,o=n._hub[r];if(o){for(var u=o.length,l=!1,f=0;f<u;f++){if(t.isImmediatePropagationStopped&&t.isImmediatePropagationStopped())return this;var c=o[f];(!s||c.ns&&c.ns.startsWith(s))&&(t.data?c.data&&(t.data=p({},c.data,t.data)):t.data=c.data||null,c.fn.apply(c.ctx,i),c.one&&(o[f]=null,l=!0))}l&&(n._hub[a]=h(o))}}),this},listened:function(t){return((this._hub||(this._events={}))[t]||[]).length>0},off:function(t,n){var i=this._hub||(this._hub={});return c(t)&&(t=t.split(/\s/)),t.forEach(function(t){var a=d(t),e=a.name,r=a.ns,s=i[e];if(s){var o=[];if(n||r)for(var h=0,u=s.length;h<u;h++)n&&s[h].fn!==n&&s[h].fn._!==n?o.push(s[h]):!r||s[h].ns&&0==s[h].ns.indexOf(r)||o.push(s[h]);o.length?i[e]=o:delete i[e]}}),this},trigger:function(){return this.emit.apply(this,arguments)}});return e.Emitter=v});
//# sourceMappingURL=sourcemaps/Emitter.js.map
